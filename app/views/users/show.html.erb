<%= provide(:title, @user.name) %>
<div class="row">
  <aside class="col-md-3">
    <section class="user_info">
      <div class="user_points">000000</div>
        <%= @user.avatar.present? ? image_tag(@user.avatar.url(:square)) : image_tag("https://s3.amazonaws.com/gametiks/users/avatars/Gametiks_Gamercard.jpg") %>
        <div class="user_level">00</div>
        <h3>
          <%= @user.name %>
          <% if @user.admin %>
          <%= '(Admin)' %>
          <% end %>
        </h3>
        <h4>
          <% if current_user == @user %>
            <%= link_to 'Upload New Harvest', new_harvest_path %>
          <% end %>
        </h4>
        
    </section>
    
  </aside>
  <section class="col-md-8"><br>
    <div id="map"></div>
      
      <%# array = [] %>
      <%# @user.harvests.each do |harvest| %>
      <%#= array.push [harvest.latitude, harvest.longitude] %>
      <%# end %>
      
    <script>
      var userLat = <%= @user.latitude %>;
      var userLng = <%= @user.longitude %>;
      var map;
      function initialize() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat:userLat, lng: userLng},
          zoom: 8,
          mapTypeId: 'terrain',
          styles: [
            {
              featureType: 'landscape',
              stylers: [
                { saturation: -50 }
              ]
            },{
              featureType: 'water',
              stylers: [
                { hue: '#174a67' },
                { saturation: 50 },
                { lightness: -80 }
              ]
            },{
              featureType: 'road',
              elementType: 'geometry',
              stylers: [
                { hue: '#00ffee' },
                { saturation: 50 }
              ]
            },{
              featureType: 'poi',
              elementType: 'labels',
              stylers: [
                { visibility: 'off' }
              ]
            }
          ]
        });
        var userHarvests = gon.harvestCoords;
        
      for(var i = 0; i < userHarvests.length; i++)
          {
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(userHarvests[i][0], userHarvests[i][1]),
                map: map,
                animation: google.maps.Animation.DROP,
                title: 'test'
            });
          };
      }
      
      function initMap(){
        initialize();
      }

      google.maps.event.addDomListener(window, 'load', initialize);
  </script>
      
  </section>
  <section class="col-md-8"><h2>Harvests</h2>
  <table>
      <tr><% @user.harvests.each do |harvest| %>
        
        <td>
          <%= image_tag harvest.image.url(:thumb) %>
          
        </td>
        <% end %>
       
      </tr>
    </table>
  </section>
  
</div>
      


